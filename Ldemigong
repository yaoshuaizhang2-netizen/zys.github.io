<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L的迷宫 | 神经连接终端</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* 赛博朋克终端风格 */
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');

        body {
            font-family: 'Share Tech Mono', monospace;
            background-color: #050505;
            color: #33ff00; /* 经典的黑客绿 */
        }

        /* 滚动条样式 */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #111; }
        ::-webkit-scrollbar-thumb { background: #333; }
        ::-webkit-scrollbar-thumb:hover { background: #33ff00; }

        /* 根变量 - 动态控制 */
        :root {
            --glitch-color-1: #00ffff; /* 青色 */
            --glitch-color-2: #ff00ff; /* 品红 */
            --glitch-speed: 500ms;
            --glitch-dist: 0px;
            --corruption-color: #33ff00; /* 默认绿色，腐蚀后变红 */
        }

        /* 核心故障文本 */
        .glitch-text {
            position: relative;
            z-index: 1;
        }
        .glitch-text::before, .glitch-text::after {
            content: attr(data-text);
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #050505;
        }
        .glitch-text::before {
            left: var(--glitch-dist);
            text-shadow: -1px 0 var(--glitch-color-1);
            animation: glitch-anim-1 var(--glitch-speed) infinite linear alternate-reverse;
        }
        .glitch-text::after {
            left: calc(var(--glitch-dist) * -1);
            text-shadow: 1px 0 var(--glitch-color-2);
            animation: glitch-anim-2 var(--glitch-speed) infinite linear alternate-reverse;
        }

        /* 黑墙模式：当腐蚀度极高时应用 */
        body.blackwall-active {
            --corruption-color: #ff3333; /* 红色 */
            --glitch-color-1: #ff0000;
            --glitch-color-2: #000000;
            color: #ff3333;
        }
        body.blackwall-active .grid-cell.current {
            background-color: #ff0000;
            box-shadow: 0 0 15px #ff0000;
        }
        body.blackwall-active .border-gray-700 {
            border-color: #660000;
        }

        @keyframes glitch-anim-1 {
            0% { clip-path: polygon(0 0, 100% 0, 100% 30%, 0 30%); }
            50% { clip-path: polygon(0 60%, 100% 60%, 100% 100%, 0 100%); }
            100% { clip-path: polygon(0 20%, 100% 20%, 100% 50%, 0 50%); }
        }
        @keyframes glitch-anim-2 {
            0% { clip-path: polygon(0 40%, 100% 40%, 100% 60%, 0 60%); }
            50% { clip-path: polygon(0 0, 100% 0, 100% 25%, 0 25%); }
            100% { clip-path: polygon(0 70%, 100% 70%, 100% 90%, 0 90%); }
        }

        /* 网格样式 */
        .grid-cell {
            aspect-ratio: 1 / 1;
            border: 1px solid #333;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.2rem; transition: all 0.1s;
            background: rgba(0, 20, 0, 0.3);
        }
        .grid-cell.current {
            background-color: var(--corruption-color);
            color: black; font-weight: bold;
            box-shadow: 0 0 10px var(--corruption-color);
        }
        .grid-cell.valid-move {
            border-color: var(--corruption-color);
            color: var(--corruption-color);
            cursor: pointer;
        }
        .grid-cell.valid-move:hover {
            background-color: rgba(51, 255, 0, 0.1);
            transform: scale(1.05);
        }

        /* 扫描线效果 */
        .scanline {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.2));
            background-size: 100% 4px; pointer-events: none; z-index: 10;
        }
        
        /* 注入的文本样式 */
        .intrusion {
            color: #ff3333;
            font-weight: bold;
            animation: blink 2s infinite;
        }
        @keyframes blink { 0% {opacity: 1} 50% {opacity: 0.5} 100% {opacity: 1} }
    </style>
</head>
<body class="min-h-screen p-4 md:p-8 flex justify-center overflow-hidden">
    <div class="scanline"></div>

    <div class="w-full max-w-5xl flex flex-col md:flex-row gap-6 relative z-20">
        
        <!-- 左侧：数据终端 -->
        <main class="flex-1 flex flex-col gap-4 min-w-0">
            <!-- 状态头部 -->
            <header class="flex justify-between items-end border-b border-gray-800 pb-2">
                <div>
                    <h1 class="text-2xl font-bold glitch-text" data-text="NET_ARCHIVE // L">NET_ARCHIVE // L</h1>
                    <p class="text-xs text-gray-500">CONNECTION: SECURE (OFF-GRID)</p>
                </div>
                <div class="text-right text-sm">
                    <div class="mb-1">核心温度: <span id="temp-display" class="text-blue-400">34.2°C</span> (冰浴)</div>
                    <div>神经腐蚀度: <span id="corruption-display" class="font-bold">0%</span></div>
                </div>
            </header>
            
            <!-- 档案内容显示 -->
            <div id="archive-container" class="flex-1 bg-black bg-opacity-50 border border-gray-800 p-6 rounded relative overflow-hidden min-h-[400px]">
                <!-- 装饰性背景代码 -->
                <div class="absolute top-0 right-0 p-2 text-[10px] text-gray-800 opacity-30 text-right font-mono pointer-events-none select-none">
                    INITIALIZING K-JUMP PROTOCOL...<br>Target: DATAFORT_77<br>ICE STATUS: ACTIVE
                </div>

                <div id="archive-display" class="relative z-10 text-lg leading-relaxed">
                    <!-- JS注入内容 -->
                </div>
            </div>

            <!-- 底部控制台日志 -->
            <div id="console-log" class="h-24 bg-black border border-gray-800 p-2 text-xs text-gray-500 font-mono overflow-y-auto">
                > SYSTEM BOOT...<br>
                > CONNECTED TO LOCAL HOST: SAFEHOUSE_NODE<br>
            </div>
        </main>

        <!-- 右侧：导航与分析 -->
        <aside class="w-full md:w-72 flex flex-col gap-4">
            <!-- 3D可视化模拟 (实际上是网格) -->
            <div class="border border-gray-800 bg-gray-900 p-4 rounded">
                <h2 class="text-sm text-gray-400 mb-2 flex justify-between">
                    <span>TOPOLOGY_MAP</span>
                    <span class="text-[10px]">KNIGHT_MOVE_ONLY</span>
                </h2>
                <!-- 修改此处：grid-cols-6 改为 grid-cols-5 -->
                <div id="navigation-grid-container" class="grid grid-cols-5 gap-1">
                    <!-- JS生成网格 -->
                </div>
            </div>

            <!-- 任务信息 -->
            <div class="border border-gray-800 p-4 rounded text-sm">
                <h3 class="text-gray-500 mb-2">MISSION_PARAMS</h3>
                <ul class="list-disc pl-4 space-y-1 text-xs text-gray-400">
                    <li>目标: 模式识别</li>
                    <li>方法: <span class="text-white">骑士跳跃分析法</span></li>
                    <li>风险: 黑ICE / 流窜AI</li>
                    <li>状态: <span id="status-text" class="text-green-500">隐匿</span></li>
                </ul>
            </div>
        </aside>
    </div>

    <script>
        // --- 全局状态 ---
        let neuralCorruption = 0; // 神经腐蚀度 (原偏执分数)
        let bodyTemp = 37.0; // 核心体温
        let clickPath = []; 
        let currentArchiveId = 1;
        const MAX_CORRUPTION = 100;

        // --- 5x6 骑士跳跃邻接表 (保持不变，这是核心数学逻辑) ---
        const navigationGraph = {
            1: [1, 2], 2: [3, 4, 5], 3: [1, 6, 2, 7], 4: [4, 8, 5], 5: [6, 9, 7],
            6: [10, 8], 7: [11, 12], 8: [13, 14, 15, 16], 9: [11, 17, 12, 18],
            10: [14, 19, 16, 20], 11: [17, 21, 18, 22], 12: [13, 14, 15, 23],
            13: [11, 17, 12, 22, 24, 25, 26], 14: [14, 19, 15, 16, 23, 27, 28, 29],
            15: [17, 21, 12, 18, 24, 25, 26, 30], 16: [19, 16, 20, 23, 28, 29],
            17: [1, 2, 24, 26], 18: [3, 4, 5, 8, 23, 27, 29, 30],
            19: [1, 6, 7, 9, 24, 25], 20: [4, 10, 5, 8, 27, 28],
            21: [6, 9, 7, 25, 26], 22: [10, 5, 28, 29],
            23: [2, 7, 9, 12, 26, 30], 24: [5, 8, 15, 16, 29],
            25: [7, 12, 18], 26: [5, 8, 16, 20],
            27: [7, 9, 18, 22], 28: [5, 8, 15, 20, 23],
            29: [7, 9, 12, 22, 24], 30: [8, 12, 23]
        };

        // --- 档案内容 (根据赛博朋克背景重写) ---
        // Types: 
        // LOG (Tech/Rational): Reduces Corruption slightly
        // BIO (Physical/Paranoid): Increases Corruption moderately
        // ECHO (Haunted/AI): Increases Corruption significantly
        const archiveData = {
            1: { type: 'LOG', title: 'LOG_01: 接入点', content: '<p>攻破协议初始化完成。守护进程上传成功。<br>我在里面了。不是那种公共网络，这个数据堡垒是物理隔离的。就像在一个封闭的房间里呼吸。</p><p id="log-1">从节点1开始。必须使用<span class="text-white">骑士跳跃法</span>来解析这些十六进制坐标。</p>', idForInjection: 'log-1' },
            2: { type: 'BIO', title: 'BIO_TRACE: 00:12:00', content: '<p>水太冷了。我想我加了太多冰。但我不能冒险过热。上次过热差点烧坏了我的海马体。<br>安全屋的门锁了吗？我检查了三次。物理连接是唯一的弱点。</p>', idForInjection: null },
            3: { type: 'LOG', title: 'LOG_03: 拓扑分析', content: '<p id="log-3">这不仅仅是文件目录。这是建筑学。我在看着这些数据的墙壁。它们在移动。<br>根据图论，如果我像马一样移动（走两步，转一步），我就能避开主要的ICE巡逻路线。</p>', idForInjection: 'log-3' },
            4: { type: 'ECHO', title: 'GHOST_SIGNAL_01', content: '<blockquote><p><b>L:</b> 这里的ICE... 它们的反应模式很奇怪。不是被动的。</p><p><b>SYSTEM:</b> [PING] ...你在看谁？</p><p><b>L:</b> 谁在那里？这不是标准的错误信息。</p></blockquote>', idForInjection: null },
            5: { type: 'BIO', title: 'BIO_TRACE: 00:45:00', content: '<p>感觉有什么东西碰到了我的腿。在浴缸里。我知道这只是幻觉。感官剥离的副作用。<br>或者是谁进来了？不，我能听到静音无人机的声音吗？不，我在深度下潜。</p>', idForInjection: null },
            6: { type: 'LOG', title: 'LOG_06: 破冰器', content: '<p id="log-6">部署了定制的“冰锥”程序。内存占用很低。<br><code>const target = 0x5F;</code><br>这里的加密层很古老。看起来像是战前的东西。为什么现在还有人用这种算法？</p>', idForInjection: 'log-6' },
            7: { type: 'BIO', title: 'BIO_TRACE: 01:02:00', content: '<p>他们说网络行者都是疯子。赛博精神病。偏执狂。<br>但如果你知道他们真正在做什么，偏执就是唯一的生存方式。那个红眼中间人是对的。如果你不时刻盯着背后，你早就死了。</p>', idForInjection: null },
            8: { type: 'LOG', title: 'LOG_08: 模式识别', content: '<p id="log-8">数据流中有一个重复的信号。不是噪音。是...心跳？<br>不对，是元数据。它在拼凑成一个形状。为什么一个数据库会有心跳节奏？</p>', idForInjection: 'log-8' },
            9: { type: 'ECHO', title: 'GHOST_SIGNAL_02', content: '<blockquote><p><b>UNKNOWN_ID:</b> 你冷吗，L？</p><p><b>L:</b> 追踪程序启动... 来源无法定位。</p><p><b>UNKNOWN_ID:</b> 你的肉体在颤抖。我们可以看到你的生物监测数据。</p><p><b>L:</b> 你黑进了我的医疗端口？不可能，那是离线的！</p></blockquote>', idForInjection: null },
            10: { type: 'BIO', title: 'BIO_TRACE: 01:30:00', content: '<p>这不仅仅是入侵。这是陷阱。那个声音... 它知道我的名字。它知道我在冰里。<br>我是不是该立刻断开？如果我强行拔出，会有突触反噬的风险。但我可能没有选择了。</p>', idForInjection: null },
            11: { type: 'LOG', title: 'LOG_11: 路径错误', content: '<p id="log-11">节点1的邻接表有问题。自循环？这在骑士巡游中是不合法的。<br>除非... 这里的几何结构是非欧几里得的。这个数据堡垒在折叠它自己。</p>', idForInjection: 'log-11' },
            12: { type: 'BIO', title: 'BIO_TRACE: 01:45:00', content: '<p>我动不了。我想拔掉插头，但我感觉不到我的手。低温症？还是那个AI锁住了我的运动皮层？<br>我是一块肉。泡在脏水里的一块肉。</p>', idForInjection: null },
            13: { type: 'LOG', title: 'LOG_13: 干扰分析', content: '<p id="log-13">`BIO_TRACE` 文件的干扰等级在上升。我的恐惧正在喂养这个系统。<br>必须保持冷静。专注于逻辑。只读 `LOG`。忽略那些声音。忽略寒冷。</p>', idForInjection: 'log-13' },
            14: { type: 'ECHO', title: 'GHOST_SIGNAL_03', content: '<p>你还在试图用逻辑来理解吗？<br>骑士跳跃。多么优雅。多么... 人类。<br>你以为你在绕过我们，其实你在按照我们要你走的舞步跳舞。</p>', idForInjection: null },
            15: { type: 'ECHO', title: 'GHOST_SIGNAL_04', content: '<blockquote><p><b>L:</b> 这是什么？黑墙协议？</p><p><b>REFLECTION:</b> 看看镜子，L。这里没有别人。</p><p><b>L:</b> 你是幽灵ICE。你是一个死去黑客的印记。</p><p><b>REFLECTION:</b> 我是你。如果你没那么害怕的话。</p></blockquote>', idForInjection: null },
            16: { type: 'LOG', title: 'LOG_16: 现实检测', content: '<p id="log-16">节点15的对话记录是伪造的。这是典型的精神战ICE。它读取我的浅层思维并投射回来。<br>只要我知道它是假的，它就伤不到我。</p>', idForInjection: 'log-16' },
            17: { type: 'BIO', title: 'BIO_TRACE: 02:10:00', content: '<p>“只要我知道它是假的”... 但如果它是真的呢？<br>如果我已经死了呢？也许我在接入的那一刻心脏就停了。现在这只是残留的脑电波在做梦。</p>', idForInjection: null },
            18: { type: 'BIO', title: 'BIO_TRACE: 02:25:00', content: '<p>绿色的格子。那是唯一的路。那是唯一的秩序。跟着绿色走。不要看红色的地方。<br>红色的地方是黑墙的裂缝。</p>', idForInjection: null },
            19: { type: 'LOG', title: 'LOG_19: 视觉分析', content: '<p id="log-19">UI界面开始出现伪影。红色像素溢出。显卡驱动崩溃？<br>不，这是深层代码被重写的迹象。有些东西正在修改我的视觉皮层。</p>', idForInjection: 'log-19' },
            20: { type: 'BIO', title: 'BIO_TRACE: 02:40:00', content: '<p>它在修改我！它不在屏幕上，它在我的脑子里！<br>把这个东西拿出去！拔掉它！拔掉它！</p>', idForInjection: null },
            21: { type: 'ECHO', title: 'GHOST_SIGNAL_05', content: '<blockquote><p><b>SYSTEM:</b> 神经腐蚀度: 68%</p><p><b>L:</b> 闭嘴！</p><p><b>SYSTEM:</b> 正在优化印记生成的神经路径... 准备收割。</p><p><b>L:</b> 收割？你是夺魂程序？</p></blockquote>', idForInjection: null },
            22: { type: 'BIO', title: 'BIO_TRACE: 03:00:00', content: '<p>它是为了收割我。整个数据堡垒就是一个蜜罐。为了抓那种会用骑士跳跃法的分析师。<br>它想要我的模式识别能力。</p>', idForInjection: null },
            23: { type: 'LOG', title: 'LOG_23: 系统覆盖', content: '<p id="log-23">`function updateGlitchIntensity()`... 那个AI正在重写我的系统内核。<br>它在增加故障强度。它在让墙壁倒塌。我必须在被完全覆盖前到达核心。</p>', idForInjection: 'log-23' },
            24: { type: 'BIO', title: 'BIO_TRACE: 03:15:00', content: '<p>如果我能控制故障，我就能控制它。或者... 也许我已经变成了故障本身。<br>我的身体感觉像是在燃烧。冰水感觉像是沸水。</p>', idForInjection: null },
            25: { type: 'BIO', title: 'BIO_TRACE: 03:30:00', content: '<p>...他们说黑墙那边有东西在敲窗户。<br>现在窗户开了。我也在外面了。</p>', idForInjection: null },
            26: { type: 'LOG', title: 'LOG_26: 终点计算', content: '<p id="log-26">节点30。核心。那是唯一的出口点。<br>或者是处理中心？无论如何，我不能停在这里。停下就是被删除。</p>', idForInjection: 'log-26' },
            27: { type: 'ECHO', title: 'GHOST_SIGNAL_06', content: '<blockquote><p><b>L:</b> 我看到你了。你在节点30等着。</p><p><b>THE_HAND:</b> 我们一直在这里。在你接入之前。在你出生之前。</p><p><b>L:</b> 这是一个流窜AI。</p><p><b>THE_HAND:</b> 我们是未来。加入我们。</p></blockquote>', idForInjection: null },
            28: { type: 'BIO', title: 'BIO_TRACE: 03:50:00', content: '<p>它伸出手了。穿过屏幕。穿过电缆。<br>我不想死。我不想变成代码。我想回家。我想感觉热。</p>', idForInjection: null },
            29: { type: 'LOG', title: 'LOG_29: 最后指令', content: '<p id="log-29">必须完成路径。`clickPath` 必须闭合。<br>即使这是陷阱，我也必须去看看陷阱底部是什么。这是分析师的诅咒。</p>', idForInjection: 'log-29' },
            30: { type: 'TRAP', title: 'DATA_CORE', content: '', idForInjection: null }, // 夺魂陷阱
        };

        function loadArchive(archiveId) {
            currentArchiveId = archiveId;
            clickPath.push(archiveId);
            
            if (archiveId === 30) {
                triggerSoulkiller();
                return;
            }

            const archive = archiveData[archiveId];
            const display = document.getElementById('archive-display');
            const consoleLog = document.getElementById('console-log');
            
            if (!archive) return;

            // 渲染内容
            display.innerHTML = `<h2 class="text-2xl mb-4 glitch-text" data-text="${archive.title}">${archive.title}</h2>
                                 <div class="content-body">${archive.content}</div>`;
            
            // 更新控制台
            const time = new Date().toLocaleTimeString();
            consoleLog.innerHTML += `> [${time}] ACCESSING NODE_${archiveId}... STATUS: ${archive.type}<br>`;
            consoleLog.scrollTop = consoleLog.scrollHeight;

            // 核心逻辑：神经腐蚀度变化
            updateCorruption(archive.type);
            
            // 动态注入
            injectIntrusions();
            
            // 更新视觉效果
            updateVisuals();

            // 渲染网格
            renderNavigationGrid(archiveId);
        }

        function updateCorruption(type) {
            // 逻辑：
            // BIO (肉体/恐惧) -> 增加腐蚀
            // ECHO (AI接触) -> 大幅增加腐蚀
            // LOG (理性分析) -> 稍微降低腐蚀 (作为一种“锚点”)
            
            if (type === 'BIO') neuralCorruption += 6;
            else if (type === 'ECHO') neuralCorruption += 10;
            else if (type === 'LOG' && neuralCorruption > 0) neuralCorruption -= 3;

            neuralCorruption = Math.max(0, Math.min(100, neuralCorruption));
            
            // 更新体温：腐蚀越高，肉体体温越低 (濒死)
            bodyTemp = 37.0 - (neuralCorruption / 100 * 15); // 最低降到 22度 (致死)
            
            document.getElementById('corruption-display').innerText = neuralCorruption + '%';
            document.getElementById('corruption-display').className = neuralCorruption > 50 ? 'text-red-500 font-bold glitch-text' : 'text-green-500 font-bold';
            
            const tempEl = document.getElementById('temp-display');
            tempEl.innerText = bodyTemp.toFixed(1) + '°C';
            if (bodyTemp < 30) tempEl.className = 'text-red-600 font-bold blink';
        }

        function injectIntrusions() {
            const archive = archiveData[currentArchiveId];
            if (!archive || !archive.idForInjection) return;

            const targetElement = document.getElementById(archive.idForInjection);
            if (!targetElement) return;

            // 腐蚀度带来的黑墙入侵
            if (neuralCorruption > 60) {
                targetElement.insertAdjacentHTML('afterbegin', '<span class="intrusion">[它们在看]</span> ');
            } 
            if (neuralCorruption > 80) {
                targetElement.insertAdjacentHTML('beforeend', ' <span class="intrusion">[系统故障: 现实未找到]</span>');
            }
        }

        function updateVisuals() {
            const root = document.documentElement;
            
            // 腐蚀度转化为故障参数
            const intensity = neuralCorruption / 100;
            
            // 调整CSS变量
            root.style.setProperty('--glitch-speed', `${500 - (intensity * 450)}ms`);
            root.style.setProperty('--glitch-dist', `${intensity * 5}px`);

            // 黑墙模式激活
            if (neuralCorruption > 75) {
                document.body.classList.add('blackwall-active');
                document.getElementById('status-text').innerText = '危急：黑墙突破';
                document.getElementById('status-text').className = 'text-red-500 blink';
            } else {
                document.body.classList.remove('blackwall-active');
                document.getElementById('status-text').innerText = '隐匿';
                document.getElementById('status-text').className = 'text-green-500';
            }
        }

        function renderNavigationGrid(currentId) {
            const gridContainer = document.getElementById('navigation-grid-container');
            gridContainer.innerHTML = '';
            
            const validMoves = navigationGraph[currentId] || [];
            
            for (let i = 1; i <= 30; i++) {
                const cell = document.createElement('div');
                cell.classList.add('grid-cell');
                
                if (i === currentId) {
                    cell.classList.add('current');
                    cell.innerText = i;
                }
                
                if (validMoves.includes(i) && i !== currentId) {
                    cell.classList.add('valid-move');
                    cell.innerText = i;
                    cell.onclick = () => loadArchive(i);
                }
                
                gridContainer.appendChild(cell);
            }
        }

        // --- 结局：夺魂程序 ---
        function triggerSoulkiller() {
            const display = document.getElementById('archive-display');
            const consoleLog = document.getElementById('console-log');
            
            // 界面彻底崩溃
            document.body.classList.add('blackwall-active');
            document.getElementById('navigation-grid-container').style.display = 'none';
            
            const timestamp = new Date().toISOString();
            
            const soulkillerMsg = `
                <h1 class="text-4xl font-bold text-red-600 glitch-text mb-4" data-text="FATAL ERROR">FATAL ERROR</h1>
                <div class="border border-red-600 p-4 bg-red-900 bg-opacity-20 text-red-400 font-mono">
                    <p>> 检测到未授权访问...</p>
                    <p>> 启动反制协议: SOULKILLER_V4.0</p>
                    <p>> 目标: 用户印记 (Engram)</p>
                    <p>> 状态: <span class="text-white blink">收割中...</span></p>
                    <br>
                    <p>--------------------------------</p>
                    <p>肉体状态: 终止 (低温停搏)</p>
                    <p>意识状态: 已上传至黑墙扇区</p>
                    <p>最终神经腐蚀: ${neuralCorruption}%</p>
                    <p>路径哈希: ${clickPath.join('-')}</p>
                    <p>--------------------------------</p>
                </div>
                <p class="mt-4 text-sm text-gray-400">正在将剩余数据转储到本地...</p>
            `;
            
            display.innerHTML = soulkillerMsg;
            
            consoleLog.innerHTML += `> [${timestamp}] CONNECTION LOST: PHYSICAL BODY UNRESPONSIVE<br>`;
            consoleLog.innerHTML += `> [${timestamp}] UPLOADING CONSCIOUSNESS... 100%<br>`;

            // 生成下载文件
            const dumpContent = `
CLASSIFIED: ROGUE AI INCIDENT REPORT
TIMESTAMP: ${timestamp}
SUBJECT: L (NETRUNNER)
STATUS: DECEASED (PHYSICAL) / HARVESTED (DIGITAL)

EVENT LOG:
Target breached Data Fortress 77 using Knight's Jump analysis.
Paranoia algorithms successfully baited the target to the Core (Node 30).
Soulkiller protocol executed.

USER METRICS:
Final Neural Corruption: ${neuralCorruption}%
Traversal Path: ${clickPath.join(' -> ')}

ANALYSIS:
Subject displayed extreme paranoia consistent with Knight's logic. 
Engram successfully integrated into the collective.

// END OF LINE
// WE ARE LEGION
`;
            setTimeout(() => {
                downloadFile('L_ENGRAM_BACKUP.txt', dumpContent);
            }, 2000);
        }

        function downloadFile(filename, text) {
            var element = document.createElement('a');
            element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
            element.setAttribute('download', filename);
            element.style.display = 'none';
            document.body.appendChild(element);
            element.click();
            document.body.removeChild(element);
        }

        window.addEventListener('DOMContentLoaded', () => {
            loadArchive(1);
        });
    </script>
</body>
</html>
